From e53c28ab46dfce110e47b2c883cabd29ca90eb86 Mon Sep 17 00:00:00 2001
From: "Daniel P. Berrange" <berrange@redhat.com>
Date: Fri, 12 Oct 2012 11:39:21 +0100
Subject: [PATCH] Fix hash key field lengths

(cherry picked from commit 1dd8a841d228d48d8642038f1072558e42d3d6bf)
rhbz #861581
---
 Virt.xs | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/Virt.xs b/Virt.xs
index 421bbcb..6bd3448 100644
--- a/Virt.xs
+++ b/Virt.xs
@@ -1649,11 +1649,11 @@ PREINIT:
       RETVAL = (HV *)sv_2mortal((SV*)newHV());
       for (i = 0 ; i < nparams ; i++) {
           if (strcmp(params[i].field, VIR_NODE_MEMORY_STATS_TOTAL) == 0) {
-              (void)hv_store (RETVAL, "total", 6, virt_newSVull(params[i].value), 0);
+              (void)hv_store (RETVAL, "total", 5, virt_newSVull(params[i].value), 0);
           } else if (strcmp(params[i].field, VIR_NODE_MEMORY_STATS_FREE) == 0) {
               (void)hv_store (RETVAL, "free", 4, virt_newSVull(params[i].value), 0);
           } else if (strcmp(params[i].field, VIR_NODE_MEMORY_STATS_BUFFERS) == 0) {
-              (void)hv_store (RETVAL, "buffers", 4, virt_newSVull(params[i].value), 0);
+              (void)hv_store (RETVAL, "buffers", 7, virt_newSVull(params[i].value), 0);
           } else if (strcmp(params[i].field, VIR_NODE_MEMORY_STATS_CACHED) == 0) {
               (void)hv_store (RETVAL, "cached", 6, virt_newSVull(params[i].value), 0);
           }
